<div class="history-viewport">
  <div class="page-header">
    <div class="title-group">
      <h1 class="page-title">Allocation History</h1>
      <p class="page-subtitle">View and track all your previous resource requests and their current lifecycle status.</p>
    </div>
    
    <div class="table-actions">
      <div class="search-box">
        <mat-icon>search</mat-icon>
        <input type="text" placeholder="Search resources...">
      </div>
    </div>
  </div>

  <mat-card class="history-card elite-table-card">
    <div *ngIf="loading" class="loader-container">
      <mat-spinner diameter="48"></mat-spinner>
      <span>Retrieving history...</span>
    </div>

    <div class="table-wrapper" *ngIf="!loading">
      <table mat-table [dataSource]="dataSource" class="saas-table">

        <ng-container matColumnDef="resource">
          <th mat-header-cell *matHeaderCellDef>Resource</th>
          <td mat-cell *matCellDef="let row">
            <div class="resource-cell">
              <div class="icon-box">
                <mat-icon>inventory_2</mat-icon>
              </div>
              <div class="resource-info">
                <span class="main-text">{{ row.resourceName .toUpperCase()}}</span>
                <span class="sub-text">ID: {{ row.id }}</span>
              </div>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Requested On</th>
          <td mat-cell *matCellDef="let row">
            <div class="date-cell">
              <span class="primary-date">{{ row.requestDate | date:'mediumDate' }}</span>
              <span class="secondary-time">{{ row.requestDate | date:'shortTime' }}</span>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
  <th mat-header-cell *matHeaderCellDef>Status</th>
  <td mat-cell *matCellDef="let row">
    <span class="solid-badge" [ngClass]="'status-' + row.status.toLowerCase()">
      {{ row.status }}
    </span>
  </td>
</ng-container>

<ng-container matColumnDef="priority">
  <th mat-header-cell *matHeaderCellDef>Priority</th>
  <td mat-cell *matCellDef="let row">
    <span class="solid-badge" [ngClass]="'priority-' + row.priority.toLowerCase()">
      {{ row.priority }}
    </span>
  </td>
</ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="history-row"></tr>
      </table>
    </div>
  </mat-card>
</div>