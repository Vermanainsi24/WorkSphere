<!-- <div class="requests-page">
  <mat-card class="requests-card">
    <div class="header-row">
      <h2>All Resource Requests</h2>
    </div>

    <div class="loader-container" *ngIf="isLoading">
      <mat-spinner diameter="50"></mat-spinner>
      <p>Fetching latest requests...</p>
    </div>

    <div class="table-container" *ngIf="!isLoading">
      <table mat-table [dataSource]="requests" class="requests-table">

        <ng-container matColumnDef="employee">
          <th mat-header-cell *matHeaderCellDef>Employee</th>
          <td mat-cell *matCellDef="let r">{{ r.employeeName }}</td>
        </ng-container>

        <ng-container matColumnDef="resource">
          <th mat-header-cell *matHeaderCellDef>Resource</th>
          <td mat-cell *matCellDef="let r">{{ r.resourceName }}</td>
        </ng-container>

        <ng-container matColumnDef="priority">
          <th mat-header-cell *matHeaderCellDef>Priority</th>
          <td mat-cell *matCellDef="let r">
            <span class="priority-badge" [ngClass]="r.priority.toLowerCase()">
              {{ r.priority }}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Date</th>
          <td mat-cell *matCellDef="let r">{{ r.requestDate | date:'yyyy-MM-dd' }}</td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let r">
            <span class="status-label">{{ r.status }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Change Status</th>
          <td mat-cell *matCellDef="let r">
            <select class="status-dropdown" 
                    [(ngModel)]="r.status" 
                    (ngModelChange)="changeStatus(r.requestId, $event)">
              <option value="APPLIED">APPLIED</option>
              <option value="ALLOCATED">ALLOCATED</option>
              <option value="AWAITED">AWAITED</option>
              <option value="RETURNED">RETURNED</option>
            </select>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

      <div class="empty-state" *ngIf="requests.length === 0">
        <mat-icon>inventory_2</mat-icon>
        <p>No resource requests found.</p>
      </div>
    </div>
  </mat-card>
</div> -->

<!-- <div class="requests-page">
  <mat-card class="requests-card">
    
    <div class="header-row">
      <div class="title-group">
        <h2>All Resource Requests</h2>
        <span class="status-indicator">
          <span class="pulse-dot"></span> Live System
        </span>
      </div>
      
      <div class="action-group">
        <button mat-icon-button [matBadge]="unreadNotifications" 
                matBadgeColor="warn" [matBadgeHidden]="unreadNotifications === 0">
          <mat-icon>notifications</mat-icon>
        </button>
      </div>
    </div>

    <div class="alert-banner" *ngIf="statusMessage">
      <mat-icon>check_circle</mat-icon>
      <span>{{ statusMessage }}</span>
      <button mat-icon-button (click)="statusMessage = ''">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <div class="loader-container" *ngIf="isLoading">
      <mat-spinner diameter="50"></mat-spinner>
      <p>Fetching latest requests...</p>
    </div>

    <div class="table-container" *ngIf="!isLoading">
      <table mat-table [dataSource]="requests" class="modern-table">

        <ng-container matColumnDef="employee">
          <th mat-header-cell *matHeaderCellDef>Employee</th>
          <td mat-cell *matCellDef="let r" class="emp-cell">
            <div class="avatar-badge">{{ r.employeeName | slice:0:1 }}</div>
            <span class="emp-name">{{ r.employeeName }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="resource">
          <th mat-header-cell *matHeaderCellDef>Resource</th>
          <td mat-cell *matCellDef="let r">{{ r.resourceName }}</td>
        </ng-container>

        <ng-container matColumnDef="priority">
          <th mat-header-cell *matHeaderCellDef>Priority</th>
          <td mat-cell *matCellDef="let r">
            <span class="priority-pill" [ngClass]="r.priority.toLowerCase()">
              {{ r.priority }}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Date</th>
          <td mat-cell *matCellDef="let r" class="date-text">
            {{ r.requestDate | date:'MMM d, yyyy' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Current Status</th>
          <td mat-cell *matCellDef="let r">
            <div class="status-container">
              <span class="status-dot" [ngClass]="r.status.toLowerCase()"></span>
              <span class="status-text">{{ r.status }}</span>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Action</th>
          <td mat-cell *matCellDef="let r">
            <select class="modern-select" 
                    [(ngModel)]="r.status" 
                    (ngModelChange)="changeStatus(r.requestId, $event)">
              <option value="APPLIED">APPLIED</option>
              <option value="ALLOCATED">ALLOCATED</option>
              <option value="AWAITED">AWAITED</option>
            </select>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="modern-row"></tr>
      </table>

      <div class="empty-state" *ngIf="requests.length === 0">
        <mat-icon>inventory_2</mat-icon>
        <p>No resource requests found.</p>
      </div>
    </div>
  </mat-card>
</div> -->















   
<div class="requests-page">

  <!-- LOADER -->
  <div class="page-loader" *ngIf="isLoading">
    <div class="loader-box">
      <mat-spinner diameter="60"></mat-spinner>
      <p>Fetching latest requests...</p>
    </div>
  </div>

  <!-- ACTUAL CONTENT -->
  <mat-card class="requests-card" *ngIf="!isLoading">

    <div class="header-row">
      <div class="title-group">
        <h2>All Resource Requests</h2>
        <span class="status-indicator">
          <span class="pulse-dot"></span>
          Live Analytics System
        </span>
      </div>

      <button mat-icon-button 
              [matBadge]="unreadNotifications"
              matBadgeColor="warn"
              [matBadgeHidden]="unreadNotifications === 0">
        <mat-icon>notifications</mat-icon>
      </button>
    </div>

    <div class="alert-banner" *ngIf="statusMessage">
      <mat-icon>check_circle</mat-icon>
      <span>{{ statusMessage }}</span>
      <button mat-icon-button (click)="statusMessage = ''">
        <mat-icon>close</mat-icon>
      </button>
    </div>



    <div class="table-container" *ngIf="!isLoading">
      <table mat-table [dataSource]="requests" class="modern-table">

        <ng-container matColumnDef="employee">
          <th mat-header-cell *matHeaderCellDef>Employee</th>
          <td mat-cell *matCellDef="let r" class="emp-cell">
            <span class="emp-name">{{ r.employeeName }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="resource">
          <th mat-header-cell *matHeaderCellDef>Resource</th>
          <td mat-cell *matCellDef="let r">{{ r.resourceName }}</td>
        </ng-container>

        <ng-container matColumnDef="priority">
          <th mat-header-cell *matHeaderCellDef>Priority</th>
          <td mat-cell *matCellDef="let r">
            <div class="priority-badge" [ngClass]="r.priority.toLowerCase()">
              {{ r.priority }}
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Date</th>
          <td mat-cell *matCellDef="let r" class="date-text">
            {{ r.requestDate | date:'MMM d, yyyy' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Current Status</th>
          <td mat-cell *matCellDef="let r">
            <div class="status-container">
              <span class="status-dot" [ngClass]="r.status.toLowerCase()"></span>
              <span class="status-text">{{ r.status }}</span>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Action</th>
          <td mat-cell *matCellDef="let r">
            <select class="modern-select" 
                    [(ngModel)]="r.status" 
                    (ngModelChange)="changeStatus(r.requestId, $event)">
              <option value="APPLIED">APPLIED</option>
              <option value="ALLOCATED">ALLOCATED</option>
              <option value="AWAITED">AWAITED</option>
              <option value="RETURNED">RETURNED</option>
            </select>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="modern-row"></tr>
      </table>

      <div class="empty-state" *ngIf="requests.length === 0">
        <mat-icon>inventory_2</mat-icon>
        <p>No resource requests found.</p>
      </div>
    </div>
  </mat-card>
</div>